services:
  flag-management:
    build: ./services/flag-management
    ports:
      - 5000:5000
    environment:
      - JWT_SIGNING_SECRET=eilafefyr8q093478ryvnbchul8934rcnlaa8ry
      - SERVICE_PORT=5000
      - APIKEY=ersafoi89a0ww3n8yrt493ew84yqjwd34y8r09
      - STALE_FLAG_DAYS=2
    volumes:
      - db-data:/data/:rw

  flag-states:
    build: ./services/flag-states
    ports:
      - 5001:5001
    environment:
      - SERVICE_PORT=5001
      - APIKEY=ersafoi89a0ww3n8yrt493ew84yqjwd34y8r09
    volumes:
      - db-data:/data:ro

  flags-dashboard:
    build: ./dashboard
    ports:
      - 3000:3000
    environment:
      - VITE_API_URL=http://flag-management/api

volumes:
  db-data: